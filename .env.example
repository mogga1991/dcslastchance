# ==============================================================================
# FedSpace GSA Leasing - Environment Variables
# ==============================================================================
#
# Copy this file to .env.local and fill in your actual values
#
# NEVER commit .env.local to git (it's in .gitignore)
#
# Setup time: ~30 minutes (all free tiers available)
# Last audited: December 14, 2024
# ==============================================================================

# ==============================================================================
# ‚úÖ REQUIRED - App won't work without these (7 variables)
# ==============================================================================

# ------------------------------------------------------------------------------
# Neon Database - Direct PostgreSQL Connection
# ------------------------------------------------------------------------------
# Used in: lib/db.ts for direct SQL queries
# Get from: https://console.neon.tech ‚Üí Connection Details
#
# Free tier: 0.5GB storage, 3GB transfer/month
DATABASE_URL="postgresql://user:password@host.neon.tech/database?sslmode=require"

# ------------------------------------------------------------------------------
# Supabase - Authentication & Storage
# ------------------------------------------------------------------------------
# Used in: Authentication, file storage, realtime subscriptions
# Get from: https://supabase.com/dashboard/project/_/settings/api
#
# Free tier: 50,000 monthly active users, 500MB database, 1GB file storage

# PUBLIC - Safe to expose in browser (embedded in client-side JavaScript)
NEXT_PUBLIC_SUPABASE_URL="https://your-project-id.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# PRIVATE - Server-side only (NEVER expose to browser)
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# ------------------------------------------------------------------------------
# Application URL
# ------------------------------------------------------------------------------
# Used in: OAuth redirects, email links, absolute URLs
#
# Development: http://localhost:3000 (or 3002 if you changed the port)
# Production: https://your-domain.com
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# ------------------------------------------------------------------------------
# SAM.gov API - Federal Contract Opportunities
# ------------------------------------------------------------------------------
# Used in: lib/sam-gov.ts for fetching government opportunities
# Get from: https://open.gsa.gov/api/get-opportunities-public-api/
#
# 100% free, no credit card needed
# Rate limit: 1,000 requests/day (plenty for MVP)
SAM_API_KEY="SAM-your-api-key-here"

# ------------------------------------------------------------------------------
# Google Maps - Property Mapping & Geocoding
# ------------------------------------------------------------------------------
# Used in: Property maps, address autocomplete, geocoding
# Get from: https://console.cloud.google.com/google/maps-apis
#
# Required APIs to enable:
#   - Maps JavaScript API
#   - Geocoding API
#
# Free tier: $200 credit/month (28,000+ map loads)
# PUBLIC - Embedded in client-side code
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY="AIzaSy..."

# ==============================================================================
# üì¶ RECOMMENDED - Improves UX but not required (2 variables)
# ==============================================================================

# ------------------------------------------------------------------------------
# Google OAuth - "Sign in with Google" Button
# ------------------------------------------------------------------------------
# Used in: lib/auth.ts for Google OAuth authentication
# Get from: https://console.cloud.google.com/apis/credentials
#
# Setup:
#   1. Create OAuth 2.0 Client ID
#   2. Application type: Web application
#   3. Authorized redirect URIs:
#      - http://localhost:3000/auth/callback (development)
#      - https://your-domain.com/auth/callback (production)
#
# If you skip these, users can still sign up with email/password
GOOGLE_CLIENT_ID="your-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="GOCSPX-your-client-secret"

# ==============================================================================
# ü§ñ AI FEATURES - Improves extraction accuracy (1 variable)
# ==============================================================================

# ------------------------------------------------------------------------------
# Anthropic Claude API - AI-Powered Requirement Extraction
# ------------------------------------------------------------------------------
# Used in: lib/ai/extract-requirements.ts for intelligent parsing
# Get from: https://console.anthropic.com
#
# Purpose: Replaces regex extraction (70% accuracy) with AI (90% accuracy)
#
# Setup:
#   1. Create Anthropic account (free tier available)
#   2. Generate API key in dashboard
#   3. Add key below
#
# Cost estimate: ~$20-30/month for 500 opportunities
# Falls back to regex if not set (no errors)
ANTHROPIC_API_KEY="sk-ant-api03-your-key-here"

# ==============================================================================
# üîß OPTIONAL - Development Tools (2 variables)
# ==============================================================================

# ------------------------------------------------------------------------------
# Supabase CLI Access Token
# ------------------------------------------------------------------------------
# Only needed if you want to run `supabase` CLI commands locally
# Get by running: supabase login
# Then copy from: ~/.supabase/access-token
#
# Skip this if you don't use Supabase CLI
# SUPABASE_ACCESS_TOKEN="sbp_..."

# ------------------------------------------------------------------------------
# Cron Job Secret - REQUIRED FOR PRODUCTION
# ------------------------------------------------------------------------------
# Used in: All /api/cron/* endpoints for scheduled jobs
# Purpose: Prevents unauthorized access to cron endpoints
#
# Production cron jobs (vercel.json):
#   - sync-opportunities (every 6 hours)
#   - sync-federal-data (daily at 2 AM)
#   - match-properties (daily at 2:30 AM)
#   - cleanup-cache (daily at 3 AM)
#
# Generate a secure random string:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# CRITICAL FOR PRODUCTION - Without this, cron jobs will fail
CRON_SECRET="your-secure-random-string-here"

# ==============================================================================
# üö´ NOT USED IN CODEBASE - Safe to ignore
# ==============================================================================
#
# The following variables were in old .env files but are NOT referenced
# in the current codebase. You can safely skip them:
#
# ‚ùå POLAR_ACCESS_TOKEN - Polar.sh payments (code removed)
# ‚ùå POLAR_WEBHOOK_SECRET - Polar.sh webhooks (code removed)
# ‚ùå POLAR_SUCCESS_URL - Polar.sh redirect (code removed)
# ‚ùå NEXT_PUBLIC_STARTER_TIER - Pricing tier ID (code removed)
# ‚ùå NEXT_PUBLIC_STARTER_SLUG - Pricing tier slug (code removed)
# ‚ùå OPENAI_API_KEY - AI features (not required for MVP)
# ‚ùå VITE_* - Wrong framework (this is Next.js, not Vite)
# ‚ùå NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN - Switched to Google Maps
#
# If you see these in old .env.local files, you can remove them

# ==============================================================================
# üìã QUICK START CHECKLIST
# ==============================================================================
#
# To get the app running locally:
#
# 1Ô∏è‚É£  Copy this file:
#     cp .env.example .env.local
#
# 2Ô∏è‚É£  Sign up for free services (~15 minutes total):
#
#     ‚úÖ Neon (Database)
#        ‚Üí https://console.neon.tech
#        ‚Üí Create project ‚Üí Copy DATABASE_URL
#
#     ‚úÖ Supabase (Authentication)
#        ‚Üí https://supabase.com/dashboard
#        ‚Üí Create project ‚Üí Settings ‚Üí API
#        ‚Üí Copy: URL, anon key, service_role key
#
#     ‚úÖ SAM.gov (Opportunities)
#        ‚Üí https://open.gsa.gov/api/get-opportunities-public-api/
#        ‚Üí Request API key (delivered via email)
#
#     ‚úÖ Google Cloud (Maps)
#        ‚Üí https://console.cloud.google.com
#        ‚Üí Enable APIs: Maps JavaScript + Geocoding
#        ‚Üí Create API key
#
# 3Ô∏è‚É£  Fill in the 7 REQUIRED variables above
#
# 4Ô∏è‚É£  Optionally add Google OAuth (2 variables)
#
# 5Ô∏è‚É£  Run the app:
#     npm install
#     npm run dev
#
# 6Ô∏è‚É£  Visit: http://localhost:3000
#
# ==============================================================================
# üîí SECURITY NOTES
# ==============================================================================
#
# PUBLIC vs PRIVATE variables:
#
# ‚úÖ PUBLIC (NEXT_PUBLIC_* prefix):
#    - Embedded in client-side JavaScript bundle
#    - Visible in browser DevTools (that's expected!)
#    - Safe to use on client-side
#    - Examples: NEXT_PUBLIC_SUPABASE_ANON_KEY, NEXT_PUBLIC_GOOGLE_MAPS_API_KEY
#
# üîí PRIVATE (no NEXT_PUBLIC_ prefix):
#    - Server-side only, never sent to browser
#    - Must be kept secret
#    - Examples: SUPABASE_SERVICE_ROLE_KEY, DATABASE_URL
#
# CRITICAL:
# - NEVER commit .env.local to git (it's in .gitignore)
# - NEVER expose SUPABASE_SERVICE_ROLE_KEY or DATABASE_URL to browser
# - DO restrict your Google Maps API key to your domain in production
#
# ==============================================================================
# ‚ö†Ô∏è COMMON ISSUES
# ==============================================================================
#
# "Supabase URL not defined"
#   ‚Üí Make sure .env.local exists (not just .env.example)
#   ‚Üí Check NEXT_PUBLIC_SUPABASE_URL is set correctly
#   ‚Üí Restart dev server after changing .env.local
#
# "Database connection failed"
#   ‚Üí Verify DATABASE_URL includes ?sslmode=require
#   ‚Üí Check Neon database isn't paused (free tier auto-pauses after inactivity)
#   ‚Üí Go to Neon console and wake it up
#
# "SAM API returned 401 Unauthorized"
#   ‚Üí Verify SAM_API_KEY is correct
#   ‚Üí Check for extra spaces or quotes
#   ‚Üí Make sure key is activated (can take 5-10 minutes after signup)
#
# "Google Maps not loading"
#   ‚Üí Verify both APIs are enabled: Maps JavaScript API + Geocoding API
#   ‚Üí Wait 1-2 minutes for new API keys to activate
#   ‚Üí Check browser console for specific error messages
#   ‚Üí Make sure API key has no restrictions (or allows localhost)
#
# "Can't sign up / sign in"
#   ‚Üí Check Supabase project isn't paused
#   ‚Üí Verify NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY
#   ‚Üí Check Supabase dashboard for authentication settings
#
# ==============================================================================
# üöÄ PRODUCTION DEPLOYMENT
# ==============================================================================
#
# When deploying to Vercel, Netlify, etc.:
#
# 1. Set all 7 REQUIRED variables in your hosting dashboard
# 2. Update NEXT_PUBLIC_APP_URL to your production domain
# 3. Update Google OAuth redirect URIs to include production domain
# 4. Restrict Google Maps API key to your production domain
# 5. Update Supabase authorized redirect URLs
#
# Vercel:
#   - Settings ‚Üí Environment Variables
#   - Add all variables
#   - Select "Production" environment
#
# DO NOT:
# - Commit .env.local to git
# - Use development credentials in production
# - Expose service role keys to browser
#
# ==============================================================================
# üìö DOCUMENTATION
# ==============================================================================
#
# For detailed setup guides, see:
# - ENV_VARIABLES_AUDIT.md (complete audit of all variables)
# - .env.example.mvp (alternative minimal template)
#
# Official documentation:
# - Supabase: https://supabase.com/docs
# - Neon: https://neon.tech/docs
# - SAM.gov API: https://open.gsa.gov/api/get-opportunities-public-api/
# - Google Maps: https://developers.google.com/maps/documentation
# - Next.js env vars: https://nextjs.org/docs/app/building-your-application/configuring/environment-variables
#
# ==============================================================================
